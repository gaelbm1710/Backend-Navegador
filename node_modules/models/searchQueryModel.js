// models/searchQueryModel.js
const { sql, poolPromise } = require('../config/db');

class SearchQuery {
    static async getAllQueries() {
        try {
            const pool = await poolPromise;
            const result = await pool.request().query('SELECT * FROM search_queries');
            return result.recordset;
        } catch (error) {
            throw new Error('Error al obtener consultas: ' + error.message);
        }
    }

    static async createSearchQuery(userId, query) {
        try {
            const pool = await poolPromise;
            await pool.request()
                .input('user_id', sql.Int, userId)
                .input('query', sql.VarChar, query)
                .query('INSERT INTO search_queries (user_id, query) VALUES (@user_id, @query)');
            return { message: 'Consulta creada con Ã©xito' };
        } catch (error) {
            throw new Error('Error al crear consulta: ' + error.message);
        }
    }
}

module.exports = SearchQuery;
