// models/userModel.js
const { sql, poolPromise } = require('../config/db');

class User {
    static async getAllUsers() {
        try {
            const pool = await poolPromise;
            const result = await pool.request().query('SELECT * FROM users');
            return result.recordset;
        } catch (error) {
            throw new Error('Error al obtener usuarios: ' + error.message);
        }
    }

    static async createUser(name, email) {
        try {
            const pool = await poolPromise;
            await pool.request()
                .input('name', sql.VarChar, name)
                .input('email', sql.VarChar, email)
                .query('INSERT INTO users (name, email) VALUES (@name, @email)');
            return { message: 'Usuario creado con Ã©xito' };
        } catch (error) {
            throw new Error('Error al crear usuario: ' + error.message);
        }
    }
}

module.exports = User;
